<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<body>
<div th:fragment="recipeCard(recipe)" class="h-100">
    <div class="h-100 d-flex flex-column">

        <!-- Afbeelding -->
        <div class="card-image border-col hover-parent d-flex justify-content-end position-relative"
             th:style="'background-image:url(' + ${recipe.imageURL} + ')'">

            <a class="stretched-link" th:href="@{/recept/{recipeId}(recipeId=${recipe.recipeID})}"></a>
            <div class="card-button position-absolute top-0 end-0 m-2">
                <div th:replace="~{:: editRecipeButton(${recipe})}"></div>
            </div>
            <div th:if="${#strings.isEmpty(recipe.imageURL)}"
                 class="position-absolute top-50 start-50 translate-middle image-button">
                <div th:if="${recipe.author.username == #authentication.name}">
                    <div th:replace="~{::addImageButton(${recipe})}"></div>
                </div>
            </div>
        </div>

        <!-- Titel -->
        <p class="border-col card-title p-2 flex-grow-1" th:text="${recipe.name}"></p>

        <!-- Porties en calorieÃ«n -->
        <div class="row g-0 align-items-stretch">
            <div class="col border-col p-2 text-center">
                <i class="bi bi-people-fill"></i>
                <span class="mb-0" type="text" id="portions" th:text="${recipe.nrOfPortions}"></span>
            </div>
            <div th:if="${recipe.calories == null}" class="col border-col p-2 text-center">
                <i class="bi bi-fire"></i>
                <span><a id="noKcal" th:href="@{/ingredient/aanvullen/{recipeID}(recipeID = ${recipe.recipeID})}">
                    vul aan
                </a></span>
            </div>
            <div th:unless="${recipe.calories == null}" class="col border-col p-2 text-center">
                <i class="bi bi-fire"></i>
                <span class="mb-0" type="text" th:text="${recipe.calories}"></span>
            </div>

        </div>
    </div>
</div>

<div th:fragment="addImageButton(recipe)">
        <a class="btn btn-primary px-3"
           th:href="@{/recept/afbeelding/{recipeID}(recipeID=${recipe.recipeID})}">+ afbeelding</a>
</div>

<div th:fragment="editRecipeButton(recipe)">
    <a th:href="@{/recept/aanpassen/{recipeID}(recipeID=${recipe.recipeID})}">
        <i th:if="${recipe.author.username == #authentication.name}"
           class="bi-pencil-fill"></i>
        <i th:unless="${recipe.author.username == #authentication.name}"
           class="bi bi-pencil-square"
           title="maak eigen kopie"
           data-toggle="tooltip"></i>
    </a>
</div>

</body>
</html>